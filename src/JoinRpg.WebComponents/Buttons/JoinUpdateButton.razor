@namespace JoinRpg.WebComponents

<JoinButton
  Variation="@VariationStyleEnum.None"
  Size="@Size"
  Label="@labelResult"
  ProgressLabel="@progressResult"
  OnClick="@OnClick"
  Submit="@Submit"
  Disabled="@Disabled"
  Title="@Title"
  />
@code {
    [Parameter] public SizeStyleEnum? Size { get; set; }
    [Parameter] public string? Label{ get; set; }
    [Parameter] public RenderFragment? LabelFragment { get; set; } 
    [Parameter] public string? ProgressText { get; set; }
    [Parameter] public RenderFragment? ProgressFragment { get; set; }
    [Parameter] public EventCallback<MouseEventArgs> OnClick { get; set; }
    [Parameter] public bool Submit { get; set; } = false;
    [Parameter] public bool Disabled { get; set; } = false;
    [Parameter] public string? Title { get; set; } = null;

    private RenderFragment labelResult = null!;
    private RenderFragment progressResult = null!;

    protected override void OnParametersSet()
    {
        base.OnParametersSet();
        labelResult = JoinButton.SelectLabel(Label, LabelFragment, "Обновить", "glyphicon-refresh");
        progressResult = JoinButton.SelectLabel(ProgressText, ProgressFragment, "Обновляем...", "glyphicon-hourglass");
    }
}
