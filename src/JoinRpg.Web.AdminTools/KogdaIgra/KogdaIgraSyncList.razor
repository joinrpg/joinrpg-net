@using JoinRpg.Web.ProjectCommon.Projects
@using Microsoft.JSInterop
@inject IKogdaIgraSyncClient Client
@inject IProjectListClient ProjectListClient

<KogdaIgraUpdater InitialModel="KogdaIgraSyncStatus"/>

@if (JoinCandidates is null)
{
    <JoinLoadingMessage />
}
else
{
  <JoinPanelWithList Items="JoinCandidates">
    <Header>Игры без привязки</Header>
      <ItemTemplate>
            <ProjectLink Model="context" />
  </ItemTemplate>
  </JoinPanelWithList>
}

@code {
    [Parameter]
    public SyncStatusViewModel? KogdaIgraSyncStatus { get; set; }

    public List<ProjectLinkViewModel>? JoinCandidates = null;

    protected override async Task OnParametersSetAsync()
    {
        JoinCandidates = await ProjectListClient.GetProjects(ProjectSelectionCriteria.ActiveWithoutKogdaIgra);
        await base.OnParametersSetAsync();
    }


}
